# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      # - name: Run a one-line script
      #  run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Exeecute TDA Job
        run: |
          curl -X POST "https://presales.testinsights.io:443/api/apikey/qveP5Ml1Xvr1NP0MkEXv_9fBF/job" \
          -H "Content-Type: application/json" \
          {
	"jobType": "VIPAutoExecutionJob",
	"projectId": 100003,
	"vipAutomationJobSettings": {
		"testSuiteId": null,
		"testPaths": null,
		"machineKey": "EC2AMAZ-0L04NIQ",
		"serverProfileId": 2,
		"serverProcessId": 536,
		"automationType": "Generate Accounts for current user",
		"scope": "Global",
		"automationParameters": [
			{
				"var": "parUserID",
				"paramIndex": 1,
				"value": null
			},
			{
				"var": "parAccountType",
				"paramIndex": 2,
				"value": "Individual Savings"
			},
			{
				"var": "parTargetConnectionID",
				"paramIndex": 3,
				"value": "1"
			},
			{
				"var": "paritem_account_number_seq_",
				"paramIndex": 4,
				"value": "1"
			},
			{
				"var": "parExportCSV_account_",
				"paramIndex": 5,
				"value": "false"
			},
			{
				"var": "parExportCSV_account_number_seq_",
				"paramIndex": 6,
				"value": "false"
			}
		],
		"sharedJobServer": false
	}
}
